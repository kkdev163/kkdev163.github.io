"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3671],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>m});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var c=n.createContext({}),i=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},s=function(e){var t=i(e.components);return n.createElement(c.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,c=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),d=i(a),k=l,m=d["".concat(c,".").concat(k)]||d[k]||u[k]||r;return a?n.createElement(m,p(p({ref:t},s),{},{components:a})):n.createElement(m,p({ref:t},s))}));function m(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,p=new Array(r);p[0]=k;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o[d]="string"==typeof e?e:l,p[1]=o;for(var i=2;i<r;i++)p[i]=a[i];return n.createElement.apply(null,p)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},2517:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>i});var n=a(7462),l=(a(7294),a(3905));const r={slug:"inner-glance-of-padlocal",title:"Wechaty-puppet-padlocal \u5b9e\u73b0\u521d\u63a2",authors:["kkdev163"],tags:["wechaty\u3001padlocal\u3001typescript"]},p=void 0,o={permalink:"/blog/inner-glance-of-padlocal",source:"@site/blog/2021-12-15-inner-glance-of-padlocal/index.md",title:"Wechaty-puppet-padlocal \u5b9e\u73b0\u521d\u63a2",description:"\u672c\u6587\u9996\u53d1\u4e8e Wechaty \u793e\u533a",date:"2021-12-15T00:00:00.000Z",formattedDate:"2021\u5e7412\u670815\u65e5",tags:[{label:"wechaty\u3001padlocal\u3001typescript",permalink:"/blog/tags/wechaty\u3001padlocal\u3001typescript"}],readingTime:8.95,hasTruncateMarker:!0,authors:[{name:"kkdev163",title:"Web \u5168\u6808\u5f00\u53d1\u5de5\u7a0b\u5e08@NetEase",url:"https://kkdev163.github.io",imageURL:"https://avatars.githubusercontent.com/u/34838245?v=4",key:"kkdev163"}],frontMatter:{slug:"inner-glance-of-padlocal",title:"Wechaty-puppet-padlocal \u5b9e\u73b0\u521d\u63a2",authors:["kkdev163"],tags:["wechaty\u3001padlocal\u3001typescript"]},nextItem:{title:"Wechaty-\u5fae\u4fe1\u7fa4\u673a\u5668\u4eba-\u8bfb\u7ecf\u52a9\u624b",permalink:"/blog/wechaty-bible-robot"}},c={authorsImageUrls:[void 0]},i=[{value:"\u5f15\u8a00",id:"\u5f15\u8a00",level:2},{value:"\u5fc3\u4e2d\u7684\u7591\u95ee",id:"\u5fc3\u4e2d\u7684\u7591\u95ee",level:2},{value:"\u6574\u4f53\u67b6\u6784",id:"\u6574\u4f53\u67b6\u6784",level:2},{value:"\u5b8c\u6574\u7684\u767b\u5f55\u6d41\u7a0b",id:"\u5b8c\u6574\u7684\u767b\u5f55\u6d41\u7a0b",level:2},{value:"\u6d88\u606f\u53d1\u9001",id:"\u6d88\u606f\u53d1\u9001",level:2},{value:"\u6d88\u606f\u63a8\u9001",id:"\u6d88\u606f\u63a8\u9001",level:3},{value:"\u95ee\u9898\u89e3\u7b54",id:"\u95ee\u9898\u89e3\u7b54",level:2},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}],s={toc:i},d="wrapper";function u(e){let{components:t,...r}=e;return(0,l.kt)(d,(0,n.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u672c\u6587\u9996\u53d1\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"https://wechaty.js.org/2021/12/15/inner-glance-of-padlocal"},"Wechaty \u793e\u533a"))),(0,l.kt)("h2",{id:"\u5f15\u8a00"},"\u5f15\u8a00"),(0,l.kt)("p",null,"\u7b14\u8005\u662f ",(0,l.kt)("a",{parentName:"p",href:"https://wechaty.js.org/"},"Wechaty")," \u548c ",(0,l.kt)("a",{parentName:"p",href:"https://wechaty.js.org/docs/puppet-providers/padlocal"},"whacty-puppet-padlocal")," \u7684\u4e00\u540d\u666e\u901a\u7528\u6237, \u66fe\u5728 Wechaty \u793e\u533a\u4e0a\u53d1\u5e03\u4e86\u4e00\u7bc7\u535a\u6587",(0,l.kt)("a",{parentName:"p",href:"https://wechaty.js.org/2021/05/02/wechaty-bible-chatbot/"},"\u300a\u5fae\u4fe1\u7fa4\u673a\u5668\u4eba-\u8bfb\u7ecf\u52a9\u624b\u300b"),"\u3002\u6b64\u6b21\u51fa\u4e8e\u5b66\u4e60\u7684\u76ee\u7684\uff0c\u9605\u8bfb\u4e86 Wechaty \u793e\u533a\u4e0a\u53d1\u5e03\u7684 PadLocal ",(0,l.kt)("a",{parentName:"p",href:"https://wechaty.js.org/2020/10/12/puppet-padlocal-intro/"},"\u76f8\u5173\u535a\u6587")," \u53ca Github \u4e0a\u5f00\u6e90\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/padlocal/wechaty-puppet-padlocal"},"wechaty-puppet-padlocal"),"\u3001",(0,l.kt)("a",{parentName:"p",href:"https://github.com/padlocal/padlocal-client-ts"},"padlocal-client-ts")," \u7b49\u4ed3\u5e93\u4ee3\u7801\uff0c\u5bf9 whacty-puppet-padlocal \u7684\u5b9e\u73b0\u505a\u4e00\u6b21 \u7b80\u5355\u3001\u7c97\u6d45 \u7684\u68b3\u7406\uff0c\u5e0c\u671b\u80fd\u591f\u501f\u6b64\u673a\u4f1a\u4e0e\u5e7f\u5927\u5f00\u53d1\u8005\u6709\u6240\u4ea4\u6d41\uff0c\u5e2e\u52a9\u81ea\u5df1\u8fdb\u4e00\u6b65\u5b66\u4e60 Wechaty \u751f\u6001\u3002"),(0,l.kt)("h2",{id:"\u5fc3\u4e2d\u7684\u7591\u95ee"},"\u5fc3\u4e2d\u7684\u7591\u95ee"),(0,l.kt)("p",null,"\u5728\u9605\u8bfb PadLocal \u4f5c\u8005\u7684",(0,l.kt)("a",{parentName:"p",href:"https://wechaty.js.org/2020/10/12/puppet-padlocal-intro/"},"\u6587\u7ae0"),"\u4e2d\uff0c\u4f5c\u8005\u7ed9\u51fa\u4e86 PadLocal \u7684\u6574\u4f53\u67b6\u6784\u62d3\u6251\u56fe:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image",src:a(2022).Z,width:"926",height:"444"})),(0,l.kt)("p",null,"\u4f5c\u8005\u5728\u6587\u4e2d\u63d0\u5230:"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6211\u4eec\u5229\u7528\u4e86 GRPC \u7684\u53cc\u5411\u901a\u4fe1\u673a\u5236\uff0c\u8ba9 puppet \u6210\u4e3a\u4ee3\u7406\uff0c\u5c06\u6240\u6709\u6d41\u91cf\u901a\u8fc7 puppet \u8f6c\u53d1\u7ed9 WeChatServer\u3002\u540c\u65f6\u7531 puppet \u6765\u7ef4\u6301\u548c WeChatServer \u4e4b\u95f4\u7684\u957f\u8fde\u63a5\u3002")),(0,l.kt)("p",null,"\u5728\u8bfb\u5230\u6b64\u5904\u65f6\uff0c\u7b14\u8005\u4ea7\u751f\u4e86\u51e0\u4e2a\u597d\u5947\u7684\u95ee\u9898\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"PadLocal\u3001PadLocalServer \u5728 Wechaty \u6574\u4f53\u67b6\u6784\u4e2d\u4e3b\u8981\u626e\u6f14\u4ec0\u4e48\u89d2\u8272\uff1f"),(0,l.kt)("li",{parentName:"ul"},"\u6709\u54ea\u4e9b\u7c7b\u578b\u7684\u8bf7\u6c42\u9700\u8981\u901a\u8fc7 grpc \u7684\u65b9\u5f0f\u4e0e PadLocalServer \u901a\u4fe1\uff1f"),(0,l.kt)("li",{parentName:"ul"},"\u5927\u4f53\u7684\u626b\u7801\u767b\u5f55\u6d41\u7a0b\u662f\u600e\u4e48\u6837\u7684\uff1f"),(0,l.kt)("li",{parentName:"ul"},"\u5927\u4f53\u7684\u6d88\u606f\u6536\u53d1\u6d41\u7a0b\u662f\u600e\u4e48\u6837\u7684\uff1f"),(0,l.kt)("li",{parentName:"ul"},"\u5230\u5e95\u6709\u6ca1\u6709\u4e00\u4e2a\u771f\u5b9e\u7684 ipad \u8bbe\u5907\uff0c\u5728\u767b\u5f55\u7740\u5fae\u4fe1\u8d26\u53f7\uff1f")),(0,l.kt)("p",null,"\u5e26\u7740\u8fd9\u51e0\u4e2a\u95ee\u9898\uff0c\u7b14\u8005\u9605\u8bfb\u4e86",(0,l.kt)("a",{parentName:"p",href:"https://github.com/padlocal/wechaty-puppet-padlocal"},"wechaty-puppet-padlocal"),"\u3001",(0,l.kt)("a",{parentName:"p",href:"https://github.com/padlocal/padlocal-client-ts"},"padlocal-client-ts")," \u7b49\u4ed3\u5e93\u4ee3\u7801\u3002\u4e0b\u6587\u5c06\u4e3a\u5927\u5bb6\u505a\u7b80\u5355\u3001\u7c97\u6d45\u7684\u89e3\u7b54\u3002"),(0,l.kt)("h2",{id:"\u6574\u4f53\u67b6\u6784"},"\u6574\u4f53\u67b6\u6784"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u6574\u4f53\u67b6\u6784",src:a(5319).Z,width:"827",height:"544"})),(0,l.kt)("p",null,"\u6211\u4eec\u4ece\u4e0a\u5f80\u4e0b\u770b\uff0c\u5728\u5e94\u7528\u5c42\u6211\u4eec\u7684\u5fae\u4fe1\u673a\u5668\u4eba\u76f4\u63a5\u4e0e Wechaty SDK \u4ea4\u4e92\uff0c\u5728 Wechaty SDK \u4e0a\u8c03\u7528\u65b9\u6cd5\uff0c\u5e76\u76d1\u542c\u4e00\u4e9b\u4e8b\u4ef6\u3002\u4f8b\u5982\u4ee5\u4e0b\u793a\u4f8b\u4ee3\u7801\uff0c\u6211\u4eec\u5728 Wechaty \u5b9e\u4f8b\u4e0a\u76d1\u542c\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"scan"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"login"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"message")," \u7b49\u4e8b\u4ef6\uff0c\u5e76\u8c03\u7528\u4e86 start() \u65b9\u6cd5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'// Importing the Wechaty npm package\nimport { Wechaty } from "wechaty";\n\n// Initializing the bot\nconst bot = new Wechaty({\n  name: "starter-bot",\n});\n\n// Starting the bot\nbot\n  .on("scan", (qrcode, status) =>\n    console.log(\n      `Scan QR Code to login: ${status}\\nhttps://wechaty.js.org/qrcode/${encodeURIComponent(\n        qrcode\n      )}`\n    )\n  )\n  .on("login", (user) => console.log(`User ${user} logged in`))\n  .on("message", (message) => console.log(`Message: ${message}`))\n  .start();\n')),(0,l.kt)("p",null,"\u8c03\u7528 start \u65b9\u6cd5\u540e\uff0c\u6211\u4eec\u5206 \u65b9\u6cd5\u8c03\u7528 \u548c \u4e8b\u4ef6\u54cd\u5e94 \u4e24\u6761\u94fe\u8def\u6765\u770b\u6574\u4f53\u7684\u67b6\u6784\u6d41\u6c34\u7ebf\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6761\u4ece\u4e0a\u5f80\u4e0b\u7684 \u65b9\u6cd5\u8c03\u7528:")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"wechaty.start()")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"PuppetPadLocal.start()")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"client = PadLocalClient.create()")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"client.api.login({onQrCodeEvent\uff0conLoginSuccess})")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"client.request(pb.LoginRequest)")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"grpc call")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"PadLocalServer")),(0,l.kt)("p",null,"\u5728 wechaty \u7684 start \u6d41\u7a0b\u4e2d\uff0c\u901a\u8fc7\u5e95\u5c42\u4f9d\u8d56\u7684\u5c42\u5c42\u8c03\u7528\uff0c\u6700\u7ec8\u521d\u59cb\u5316\u8bf7\u6c42\uff0c\u4f1a\u53d8\u6210\u4e00\u4e2a LoginRequest \u901a\u8fc7 grpc \u7684\u65b9\u5f0f\u53d1\u9001\u81f3 PadLocalServer\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6761\u4ece\u4e0b\u5f80\u4e0a\u7684 \u4e8b\u4ef6\u54cd\u5e94:")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"_onServerMessage")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"onQrCodeEvent")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"PuppetPadLocal.emit('scan', {qrcode})")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"wechaty.emit('scan')")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"QRCode")),(0,l.kt)("p",null,"grpcClient \u5728\u63a5\u6536\u5230 PadLocalServer \u7684\u54cd\u5e94\u540e\uff0c\u901a\u8fc7\u56de\u8c03 \u53ca \u4e8b\u4ef6\u8ba2\u9605\u7684\u65b9\u5f0f\uff0c\u5411\u4e0a\u5c42\u9010\u7ea7\u629b\u51fa scan \u4e8b\u4ef6\uff0c\u6211\u4eec\u7684\u5e94\u7528\u5c42\u5c31\u62ff\u5230\u4e86\u767b\u5f55\u4e8c\u7ef4\u7801\u3002"),(0,l.kt)("h2",{id:"\u5b8c\u6574\u7684\u767b\u5f55\u6d41\u7a0b"},"\u5b8c\u6574\u7684\u767b\u5f55\u6d41\u7a0b"),(0,l.kt)("p",null,"\u4ee5\u4e0a\u7684\u6d41\u7a0b\u4ecb\u7ecd\u4e2d\uff0c\u6211\u4eec\u63d0\u5230\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"wechaty.start")," \u7684\u65b9\u6cd5\u8c03\u7528 \u53ca ",(0,l.kt)("inlineCode",{parentName:"p"},"wechaty.on('scan')")," \u65b9\u6cd5\u76d1\u542c\uff0c\u53ef\u4ee5\u62ff\u5230\u4e86\u4e00\u4e2a QRCode\uff0c\u6211\u4eec\u4f7f\u7528\u624b\u673a\u626b\u7801\u5373\u53ef\u5b8c\u6210\u767b\u5f55\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u53ea\u53d1\u4e86\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"LoginRequest")," \u7684\u8bf7\u6c42\uff0c\u54cd\u5e94\u662f\u62ff\u5230\u7684\u662f\u4e00\u4e2a \u4e8c\u7ef4\u7801\u3002\u4e00\u4e2a\u8bf7\u6c42\u4e00\u4e2a\u54cd\u5e94\uff0c\u7406\u8bba\u4e0a\u4e00\u6b21\u65b9\u6cd5\u8c03\u7528\u5c31\u7ed3\u675f\u4e86\uff0c\u90a3\u4e0a\u5c42\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"login")," \u7684\u4e8b\u4ef6\uff0c\u53c8\u662f\u901a\u8fc7\u4ec0\u4e48\u673a\u5236\u89e6\u53d1\u7684\u5462\uff1f"),(0,l.kt)("p",null,"\u7b54\u6848\u5e94\u8be5\u5c31\u662f gRPC, \u7b14\u8005\u6ca1\u6709\u4f7f\u7528\u8fc7 gRPC, \u4f46\u5728 PadLocal \u4f5c\u8005\u7684\u6587\u7ae0\u4e2d\uff0c\u4ed6\u63d0\u5230 gRPC \u5177\u5907\u53cc\u5411\u901a\u4fe1\u673a\u5236\uff0c\u518d\u7ed3\u5408\u8fd9\u51e0\u5904\u7684\u6e90\u7801"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/padlocal/padlocal-client-ts/blob/7ba679d78d13aeacb67969f0d817dbabf64f9c36/src/PadLocalClientApi.ts#L24-L54"},"PadLocalClientApi.login")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/padlocal/padlocal-client-ts/blob/7ba679d78d13aeacb67969f0d817dbabf64f9c36/src/Request.ts#L233"},"Request.","_","onServerMessage")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/padlocal/padlocal-client-ts/blob/7ba679d78d13aeacb67969f0d817dbabf64f9c36/src/Request.ts#L214"},"Request.","_","completePendingRequest"))),(0,l.kt)("p",null,"\u7b14\u8005\u5927\u80c6\u731c\u6d4b: \u5728\u53d1\u8d77 LoginRequest \u7684 gRPC \u8bf7\u6c42\u540e\uff0cPadLocal \u670d\u52a1\u7aef\u4f1a\u6839\u636e\u767b\u5f55\u72b6\u6001\uff0c\u6301\u7eed\u5411 Client \u7aef\u54cd\u5e94\u6d88\u606f\uff0c\u89e6\u53d1 Client \u4e2d\u7684 \u767b\u5f55\u76f8\u5173\u7684\u51e0\u4e2a\u4e8b\u4ef6\u56de\u8c03\u5982 ",(0,l.kt)("inlineCode",{parentName:"p"},"onQrCodeEvent"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"onLoginStart"),"\u3001\n",(0,l.kt)("inlineCode",{parentName:"p"},"onLoginSuccess"),"\uff0c\u5e76\u4f1a\u63a7\u5236 Client \u7aef \u4e0e Wechat Server \u5b8c\u6210\u957f\u8fde\u63a5\u7684\u5efa\u7acb\u3002\u7b49\u5230\u8fd9\u4e9b\u521d\u59cb\u5316\u90fd\u5b8c\u6210\u540e\uff0c\u624d\u4f1a\u901a\u8fc7 gRPC \u54cd\u5e94\u5934\u4e2d\u7684 ack \u5b57\u6bb5\uff0c\u6765\u7ed3\u675f\u8fd9\u6b21 LoginRequest \u7684 gRPC \u8bf7\u6c42\u3002"),(0,l.kt)("p",null,"\u7531\u4e8e\u53d1\u8d77 LoginRequest \u540e\uff0c\u53ef\u80fd\u9700\u8981\u505a\u957f\u65f6\u95f4\u7b49\u5f85(\u5982\u7b49\u5f85\u7528\u6237\u626b\u7801)\u3001\u5e76\u63a7\u5236 Client \u7aef\u4e0e Wechat Server \u5efa\u7acb\u957f\u8fde\u63a5\uff0c\u6240\u4ee5\u8fd9\u4e2a gRPC \u7684\u8d85\u65f6\u7b49\u5f85\u65f6\u95f4\u4e5f\u975e\u5e38\u7684\u957f\uff0c\u6709 10 \u5206\u949f\u4e4b\u4e45\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// 10 min timeout\nconst request = this.client.createRequest({\n  requestTimeout: 10 * 60 * 1000,\n});\n")),(0,l.kt)("p",null,"\u7528\u4e00\u5f20\u56fe\u6765\u7b80\u8981\u793a\u610f\u4e0b\uff0c\u5b8c\u6574\u7684 LoginRequest gRPC \u8c03\u7528\u6d41\u7a0b:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image",src:a(5673).Z,width:"1800",height:"741"})),(0,l.kt)("h2",{id:"\u6d88\u606f\u53d1\u9001"},"\u6d88\u606f\u53d1\u9001"),(0,l.kt)("p",null,"\u5728\u901a\u8fc7 Wechaty SDK \u53d1\u9001\u6587\u5b57\u6d88\u606f\u65f6\uff0c\u5982\u4e0a\u8ff0\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"wechat.start()")," \u8c03\u7528\u6d41\u7a0b\u4e00\u6837\uff0c\u4f1a\u7ecf\u8fc7\u4ee5\u4e0b\u5c42\u7ea7\u8c03\u7528\u53d1\u9001\u81f3 PadLocalServer"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"contact.say('text message')")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"PuppetPadLocal.messageSendText(toUserName,'text message')")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"client.api.sendTextMessage(toUserName,'text message')")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"client.request(pb.SendTextMessageRequest)")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"grpc call")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"PadLocalServer")),(0,l.kt)("p",null,"PadLocalServer \u7aef\u5e94\u8be5\u4f1a\u6839\u636e Client \u7684\u8bf7\u6c42\u7c7b\u578b SendTextMessageRequest\uff0c \u5728 gRPC \u7684\u54cd\u5e94\u91cc\uff0c\u6307\u793a Client \u9700\u8981\u901a\u8fc7 \u957f\u8fde\u63a5\u5c06 textMessage \u53d1\u9001\u7ed9 WechatyServer\u3002"),(0,l.kt)("p",null,"\u800c\u6240\u6709\u901a\u8fc7\u957f\u8fde\u63a5\u53d1\u9001\u7ed9 wechatyServer \u7684\u6570\u636e\uff0c\u90fd\u9700\u8981\u518d\u4e00\u6b21 \u901a\u8fc7 gRPC \u5c06\u8bf7\u6c42\u5185\u5bb9\u8fdb\u884c\u5305\u88c5(\u53ef\u80fd\u662f\u7528\u7834\u89e3\u7684\u5fae\u4fe1\u52a0\u5bc6\u7b97\u6cd5\u8fdb\u884c\u5904\u7406)\u3002\u518d\u5c06\u5305\u88c5\u540e\u7684\u6570\u636e\uff0c\u4f20\u8f93\u7ed9 wechatyServer\u3002"),(0,l.kt)("p",null,"\u89c1\u4ee5\u4e0b\u793a\u610f\u56fe:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u6d88\u606f\u53d1\u9001\u793a\u610f\u56fe",src:a(2188).Z,width:"956",height:"574"})),(0,l.kt)("h3",{id:"\u6d88\u606f\u63a8\u9001"},"\u6d88\u606f\u63a8\u9001"),(0,l.kt)("p",null,"\u7531\u4e8e Client \u901a\u8fc7\u957f\u8fde\u63a5\u4e0e WechatyServer \u8fdb\u884c\u8fde\u63a5\uff0c\u5fae\u4fe1\u7684\u6d88\u606f\uff0c\u4f1a\u76f4\u63a5\u5230\u8fbe Client \u7aef\uff0c\u4f46 Client \u7aef\u9700\u8981\u901a\u8fc7 gRPC \u8bf7\u6c42\uff0c\u5c06\u6d88\u606f\u7684\u5185\u5bb9\u505a unpack \u5904\u7406(\u53ef\u80fd\u662f\u7528\u89e3\u5bc6\u7b97\u6cd5)\u3002\u7136\u540e\u6839\u636e\u6d88\u606f\u7684\u7c7b\u578b\uff0cemit \u5230\u4e0a\u5c42\u4e2d\uff0c\u5b8c\u6210\u6d88\u606f\u7684\u63a5\u6536\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u6d88\u606f\u63a8\u9001\u793a\u610f\u56fe",src:a(75).Z,width:"802",height:"660"})),(0,l.kt)("h2",{id:"\u95ee\u9898\u89e3\u7b54"},"\u95ee\u9898\u89e3\u7b54"),(0,l.kt)("p",null,"\u6700\u540e\u6211\u4eec\u6765\u770b\u4e0b\u4e00\u5f00\u59cb\u63d0\u5230\u7684\u51e0\u4e2a\u95ee\u9898:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"PadLocal\u3001PadLocalServer \u5728 Wechaty \u6574\u4f53\u67b6\u6784\u4e2d\u4e3b\u8981\u626e\u6f14\u4ec0\u4e48\u89d2\u8272\uff1f"),(0,l.kt)("li",{parentName:"ul"},"\u6709\u54ea\u4e9b\u7c7b\u578b\u7684\u8bf7\u6c42\u9700\u8981\u901a\u8fc7 grpc \u7684\u65b9\u5f0f\u4e0e PadLocalServer \u901a\u4fe1\uff1f"),(0,l.kt)("li",{parentName:"ul"},"\u5230\u5e95\u6709\u6ca1\u6709\u4e00\u4e2a\u771f\u5b9e\u7684 ipad \u8bbe\u5907\uff0c\u5728\u767b\u5f55\u7740\u5fae\u4fe1\u8d26\u53f7\uff1f")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"PadLocal\u3001PadLocalServer \u5728 Wechaty \u6574\u4f53\u67b6\u6784\u4e2d\u4e3b\u8981\u626e\u6f14\u4ec0\u4e48\u89d2\u8272\uff1f")),(0,l.kt)("p",null,"PadLocal \u5728\u6574\u4f53\u67b6\u6784\u4e2d\u626e\u6f14\u4e00\u4e2a \u5fae\u4fe1 iPad \u7aef\u4ee3\u7406\u7684\u89d2\u8272\uff0c\u4ed6\u4f1a\u4e0e Wechat Server \u5efa\u7acb\u957f\u8fde\u63a5\uff0c\u8fdb\u884c\u6536\u53d1\u6d88\u606f\u64cd\u4f5c\u3002\u4f46 Wechaty SDK \u5728 PadLocal \u4e0a\u7684\u6240\u6709\u4e3b\u52a8\u65b9\u6cd5\u8c03\u7528\uff0c\u90fd\u9700\u8981\u5148 \u901a\u8fc7 gRPC \u7684\u65b9\u5f0f\uff0c\u8bf7\u6c42\u5230 PadLocalServer\uff0c \u5728\u6536\u5230 PadLocalServer \u7684\u54cd\u5e94\u6307\u793a\u540e\uff0c PadLocal \u624d\u77e5\u9053\u5982\u4f55\u8fdb\u884c\u540e\u7eed\u7684\u64cd\u4f5c\u5904\u7406(\u901a\u8fc7 \u957f/\u77ed \u8fde\u63a5\uff0c\u6216\u662f HTTP \u8bf7\u6c42 \u5fae\u4fe1\u670d\u52a1\u7aef)\u3002\u5e76\u4e14\u6240\u6709\u7684 \u6d88\u606f\u7684\u53d1\u9001\u3001\u63a5\u6536 \u7684\u52a0\u89e3\u5bc6\u5904\u7406\uff0c\u90fd\u9700\u8981\u901a\u8fc7 PadLocalServer \u8fdb\u884c\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6709\u54ea\u4e9b\u7c7b\u578b\u7684\u8bf7\u6c42\u9700\u8981\u901a\u8fc7 gRPC \u7684\u65b9\u5f0f\u4e0e PadLocalServer \u901a\u4fe1\uff1f")),(0,l.kt)("p",null,"Wechaty SDK \u4e0a\u7684\u6240\u6709\u4e3b\u52a8\u65b9\u6cd5\u8c03\u7528\uff0c\u90fd\u4f1a\u53d8\u6210 client.api \u7684\u65b9\u6cd5\u8c03\u7528\uff0c\u6700\u540e\u53d8\u6210 gRPC \u8bf7\u6c42\u5230 PadLocalServer\u3002\u518d\u6839\u636e gRPC \u7684\u54cd\u5e94\u6307\u793a\uff0c\u4e0e Wechat Server \u8fdb\u884c\u4ea4\u4e92\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5230\u5e95\u6709\u6ca1\u6709\u4e00\u4e2a\u771f\u5b9e\u7684 ipad \u8bbe\u5907\uff0c\u5728\u767b\u5f55\u7740\u5fae\u4fe1\u8d26\u53f7\uff1f")),(0,l.kt)("p",null,"\u5176\u5b9e\u7b14\u8005\u901a\u8fc7\u7c97\u6d45\u7684\u5b66\u4e60\uff0c\u4e5f\u8fd8\u4e0d\u80fd\u786e\u5b9a PadLocalServer \u540e\u9762\u662f\u5426\u8fde\u63a5\u7740\u771f\u5b9e\u7684 ipad \u8bbe\u5907\uff0c\u7b14\u8005\u53ea\u80fd\u6839\u636e PadLocal \u4f5c\u8005\u7684\u6587\u7ae0 \u53ca \u8bbe\u5907\u6210\u672c \u7b49\u731c\u6d4b\uff0cPadLocal \u4f5c\u8005\u5e94\u8be5\u662f\u5b8c\u5168\u7834\u89e3\u4e86 \u5fae\u4fe1 ipad \u7aef API\uff0c\u7136\u540e\u6a21\u62df\u51fa\u4e86\u4e00\u4e2a ipad \u8bbe\u5907\u3002"),(0,l.kt)("h2",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,l.kt)("p",null,"\u672c\u7bc7\u6587\u7ae0\u7b80\u5355\u3001\u7c97\u6d45\u5730\u68b3\u7406\u4e86 PadLocal \u7684\u767b\u5f55\u3001\u6d88\u606f\u6536\u53d1\u6d41\u7a0b\u3002PadLocal \u4e2d\u7684\u8bb8\u591a\u5b9e\u73b0\uff0c\u7b14\u8005\u6ca1\u6709\u4eb2\u81ea\u5b9e\u8df5\u8fc7\uff0c\u53ea\u80fd\u6839\u636e\u770b\u5230\u7684\u6e90\u4ee3\u7801\u8fdb\u884c\u63a8\u6d4b\uff0c\u5e0c\u671b\u80fd\u501f\u7740\u8fd9\u7bc7\u6587\u7ae0\u4e0e\u611f\u5174\u8da3\u7684\u5f00\u53d1\u8005\u6709\u6240\u4ea4\u6d41\uff0c\u5e76\u671f\u5f85\u793e\u533a\u4e2d\u6709\u66f4\u591a PadLocal \u76f8\u5173\u7684\u5185\u90e8\u539f\u7406\u6027\u6587\u7ae0\u4ea7\u51fa\uff0c\u5e2e\u52a9\u6211\u4eec\u5b66\u4e60 Wechaty \u751f\u6001\u3002"))}u.isMDXComponent=!0},5319:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/graph-728e3b884c0e9d5a387076e991f1156f.webp"},5673:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/login-c0225ecd154d796ef52d949dff82a8f7.webp"},75:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/receive-msg-7e92130e5db53c908422ea9f4170b608.webp"},2188:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/send-msg-899846ecefecce6501bcea8b2a25b0d4.webp"},2022:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/topological-graph-08c99dee543d96a5a3b1b0699413dc41.webp"}}]);